<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tech Taboo</title>

  <!-- Game CSS -->
  <link rel="stylesheet" href="./css/taboo.css" />

  <!-- Alpine.js -->
  <!--<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>-->
</head>

<body class="game-page" x-data="taboo()" x-init="init()" @keydown.window="keys($event)">

  <!-- HEADER -->
  <header class="app-header">
    <a href="./index.html" class="home-link">ğŸ </a>
    <div class="timer" :class="timerClass" x-text="timeDisplay"></div>
    <button class="hamburger mobile-only" @click="menuOpen = !menuOpen">â˜°</button>


    <div class="header-controls desktop-only">
      <button @click="toggleTheme()" title="Toggle theme">
        <span x-text="theme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸'"></span>
      </button>

      <button @click="toggleAudience()">ğŸ‘</button>
      <button @click="toggleTimer()" :class="{ active: timerEnabled }">â±</button>
      <button @click="shuffle()">ğŸ”€</button>
      <button @click="toggleBuzzer()" title="Mute buzzer">
        <span x-text="buzzerMuted ? 'ğŸ”‡' : 'ğŸ”Š'"></span>
      </button>

    </div>
  </header>
  <div class="mobile-menu mobile-only" x-show="menuOpen" @click.outside="menuOpen = false">

    <button @click="toggleTheme(); menuOpen=false">ğŸŒ™ / â˜€ï¸ Theme</button>
    <button @click="toggleAudience(); menuOpen=false">ğŸ‘ Audience</button>
    <button @click="toggleTimer(); menuOpen=false">â± Timer</button>
    <button @click="shuffle(); menuOpen=false">ğŸ”€ Shuffle</button>
    <button @click="toggleBuzzer(); menuOpen=false">
      <span x-text="buzzerMuted ? 'ğŸ”‡ Unmute buzzer' : 'ğŸ”Š Mute buzzer'"></span>
    </button>

  </div>


  <!-- MAIN GAME AREA -->
  <main class="app-main">
    <div class="content" :class="animation">
      <div class="forbidden">
        <template x-for="w in current.forbidden" :key="w">
          <span x-text="w"></span>
        </template>
      </div>

      <div class="term" x-show="!audience" x-text="current.term" :class="{ 'time-up': timeUp }"></div>
      <div class="term" x-show="audience">???</div>
    </div>
    <div class="slide-counter" x-text="counterText"></div>
  </main>

  <!-- FOOTER -->

  <footer class="app-footer">
    <!-- Prev -->
    <button class="nav-btn prev" @click="prev()">
      <span class="icon">â—€</span>
      <span class="label">Prev</span>
      <span class="key">Left</span>
    </button>

    <!-- Deck name -->
    <div class="deck-label" x-text="deckName"></div>

    <!-- Next -->
    <button class="nav-btn next" @click="next()">
      <span class="label">Next</span>
      <span class="icon">â–¶</span>
      <span class="key">Right</span>
    </button>
  </footer>

  <audio id="buzzer" preload="auto">
    <source src="./sounds/buzzer.mp3" type="audio/mpeg" />
  </audio>


  <!-- Alpine game logic -->
  <script src="./js/taboo.js?v=1.0.1" defer></script>
  <!-- Alpine.js AFTER -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</body>

</html>